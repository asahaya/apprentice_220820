---
title: ""
emoji: "✨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---


簡単な紹介を受けたので、Flutterの実習を始める準備ができました。最初の仕事は基本的なアプリをゼロから作ることで、ツールやFlutterアプリの基本構造のコツをつかむ機会を提供します。アプリをカスタマイズし、`ListView`や`Slider`などの人気のあるウィジェットを使って、変更に応じてUIを更新する方法を学びます。

シンプルなアプリを作ることで、Flutterでクロスプラットフォームアプリを作ることがいかに迅速かつ簡単であるかを確認することができます - そしてそれはあなたに迅速な勝利をもたらすでしょう。

この章の終わりには、軽量のレシピアプリを構築していることでしょう。このアプリはFlutterを学び始めたばかりなので、ハードコードされたレシピの`List`を提供し、`Slider`を使って一人前の量を再計算するようにします。

完成したアプリはこのような感じになります。


``
![画像](https://画像のURL =250x)


この章を始めるのに必要なのは、Flutterをセットアップすることです。`flutter doctor`の結果でエラーがなければ、始める準備はできています。そうでない場合は、第1章「はじめに」に戻って環境を整えてください


# 新しいアプリを作成する
新しいFlutterアプリを始めるには、2つの簡単な方法があります。前章では、IDEを通じて新しいアプリプロジェクトを作成しました。もう1つは、flutterコマンドでアプリを作成する方法です。ここでは2番目の方法を使います。

ターミナルウィンドウを開き、プロジェクト用の新しいフォルダーを作成したい場所に移動します。例えば、この本の資料を使い、 flta-materials/02-hello-flutter/projects/starter/ に移動します。

新しいプロジェクトを作成するのは簡単です。ターミナルで、実行します。


```
flutter create apprentice_220820
```

このコマンドは、新しいフォルダーに新しいアプリを作成し、両方とも**apprentice_220820**という名前にします。このアプリには、前の章で見たようなデモアプリのコードがあり、iOS と Android での実行がサポートされています。

IDE を使用して、既存のプロジェクトとして **apprentice_220820** フォルダを開きます。
![画像](https://画像のURL =250x)

ビルドして実行すると、第1章「はじめに」と同じデモアプリが表示されます。![画像](https://画像のURL =250x)


ボタンをタップすると、カウンターが増えます。

# アプリを自分のものにする
`flutter create`コマンドはすべての定型的な機能を備えているため、この既製のアプリから始めるのはよい方法です。しかし、これはあなたのアプリではありません。**main.dart**の先頭付近にあるように、これは文字通り**MyApp**です。



```
class MyApp extends StatelessWidget {

```

これは、MyAppという新しいDartクラスを定義し、`StatelessWidget`を**拡張**、つまり継承している。Flutterでは、ユーザーインターフェイスを構成するほぼすべてのものがWidgetです。`StatelessWidget`はビルドした後も変更されません。ウィジェットとステートについては、次のセクションでもっと詳しく学びます。今のところ、`MyApp`をアプリのコンテナとして考えてください。

レシピアプリを作成しているので、メインクラスは`MyApp`という名前ではなく、フォルダ名という名前にしたいのです。

複数の場所で手動で変更することもできますが、代わりに IDE の名前の変更アクションを使用することで、コピーアンドペーストのエラーやタイプミスの可能性を低くすることができます。これにより、シンボルの定義とその呼び出し元すべての名前を同時に変更することができます。

Android Studioでは、**Refactor ▸ Rename**メニュー項目、またはMyApp...クラスで**MyApp**を右クリックし、**Refactor ▸ Rename**に移動することで行えます。**MyApp**の名前を**RecipeApp**に変更します。結果はこのようになります。




```dart
void main() {
  runApp(RecipeApp());
}
class RecipeApp extends StatelessWidget {
```
runApp() は Flutter に、アプリのトップレベルのウィジェットを伝えます。

ホットリロードでは、先ほど行ったコードの変更は含まれません。新しいコードを実行するには、ホットリスタートを実行する必要があります。この場合、UIには何の変化もありません。

:::message
注意: 第1章「はじめに」で述べたように、変更を保存すると、ホットリロードが自動的に実行され、UIが更新されます。もしこれが起こらない場合は、FlutterのIDE設定をチェックして、有効になっていることを確認してください。もし、変更を保存したときに起動させたくない場合は、手動で実行することができます。Android StudioのショートカットはCommand- \です。

ホットリロードを使えば、コード変更の効果をすぐに確認でき、アプリの状態も保持されます。例えば、コードが変更される前にユーザーが「ログイン」状態であった場合、ホットリロードによってその状態が保持され、変更をテストするために再度ログインする必要はありません。
:::

# アプリをスタイリングする
引き続き新しいアプリにするために、次はウィジェットの外観をカスタマイズします。`RecipeApp `の `build()` を置き換えてください。


```dart:main.dart
//1_
  @override
  Widget build(BuildContext context) {
    //2_ 標準的なThemeData
    final ThemeData theme = ThemeData();
    //3_
    return MaterialApp(
      //4_デバイスが判別する名前、UIに表示はされない
      title: 'Recipe Calculator',
      //5_テーマをCopyWithして配色を最新のものに置き換える
      theme: theme.copyWith(
        colorScheme: theme.colorScheme.copyWith(
          primary: Colors.grey,
          secondary: Colors.black,
        ),
      ),
      //6_titleを追加してデータを渡す
      home: const MyHomePage(
        title: 'RecipeCalculator',
      ),
    );
  }
}

```
このコードは、アプリの外観を変更するものです。


このコードは、アプリの外観を変更します。

> 1//ウィジェットの build() メソッドは、他のウィジェットを組み合わせて新しいウィジェットを作成するためのエントリポイントです。Overrideアノテーションは、Dartアナライザーに、このメソッドがStatelessWidgetのデフォルトメソッドを置き換えるものであることを伝えます。

> 2//テーマは、色のような視覚的な側面を決定します。デフォルトの ThemeData は、標準的な Material のデフォルトを表示します。

> 3//MaterialAppはMaterial Designを使用しており、RecipeAppに含まれるウィジェットです。

> 4//アプリのタイトルは、デバイスがアプリを識別するために使用する説明です。UIには表示されません。

> 5//テーマをコピーして、配色を最新のものに置き換えることで、アプリの色を変更することができます。ここでは、プライマリカラーをColors.gray、セカンダリカラーをColors.blackとしています。

> 6//MyHomePageウィジェットは以前と同じものを使用していますが、タイトルを更新して端末に表示させています。



これでアプリを再起動すると、同じウィジェットが表示されますが、より洗練されたスタイルになっています。

画像

`MaterialApp`のボディをカスタマイズすることで、アプリを自分好みにするための第一歩を踏み出しました。次のセクションでは、アプリのクリーンアップを完了します。

# アプリをクリアする
アプリをテーマ化したのに、カウンターデモが表示されたままになっています。次のステップは、画面をクリアすることです。まず、`_MyHomePageState` クラスを次のように置き換えます。



```dart:main.dart

class _MyHomePageState extends State<MyHomePage> {
  @override
  Widget build(BuildContext context) {
    //1_Scaffoldは画面の上位構造
    return Scaffold(
      //2_MyApp()から渡されたtitleプロパティを取得
      appBar: AppBar(
        title: Text(widget.title),
        centerTitle: true,
      ),
      //3_SafeAreaで上部のノッチ部分などに画面が掛からないように設定
      body: SafeArea(
        // TODO: Replace child: Container()
        //4_
        child: Container(
          color: Colors.amber,
        ),
      ),
    );
  }
}
```


これが何を示しているのか、簡単に見てみましょう。

>1//
 `Scaffold`は、画面の上位構造を提供します。この例では、2つのプロパティを使用しています。

>2//
 `AppBar`は、homeから渡されたタイトルを持つ`Text`ウィジェットを使用して、`title`プロパティを取得します。前のステップの`home: MyHomePage(title: 'Recipe Calculator')`から渡されたタイトルを持つTextウィジェットを使用して、AppBarはtitleプロパティを取得します。


>3//
 `body` には `SafeArea` があり、ノッチなどのオペレーティングシステムのインターフェースや、iOS の画面下部にある Home Indicator のようなインタラクティブな領域に、アプリが近づきすぎないようにします。

>4/
 `SafeArea` は `child` ウィジェットを持っており、これは空の `Container` ウィジェットです。
ホットリロードを1回行えば、きれいなアプリが完成します。

# レシピリストの構築
空のレシピアプリはあまり便利ではありません。アプリには、ユーザーがスクロールできるレシピの素敵なリストがあるはずです。しかし、これらを表示する前に、UIを埋めるためのデータが必要です。

## データモデルを追加する
このアプリでは、レシピの主なデータ構造として`Recipe_Data`を使用します。

**lib** フォルダに新しい **Dart ファイル**を作成し、**recipe.dart** と名付けます。

そのファイルに以下のクラスを追加します。

```dart:recipe.dart
class Recipe_Data {
  String label;
  String imageURL;
    // TODO: Add servings and ingredients here
  Recipe_Data(
    this.label,
    this.imageURL,
  );
  // TODO; Add List<Recipe> here
}
// TODO: Add Ingredient() here

```

これは、ラベルと画像を持つ`Recipe_Data`モデルの始まりです。

また、アプリが表示するためにいくつかのデータを提供する必要があります。フル機能のアプリでは、このデータをローカルデータベースかJSONベースのAPIからロードします。しかし、Flutterを使い始めるにあたって簡単にするために、この章ではハードコードされたデータを使用します。

以下のメソッドをRecipeに置き換えて追加します。
 // TODO: ここにList<Recipe>を追加してください。


```dart:recipe.dart
class Recipe_Data {
  String label;
  String imageURL;
    // TODO: Add servings and ingredients here
  Recipe_Data(
    this.label,
    this.imageURL,
  );
  // TODO; Add List<Recipe> here
  static List<Recipe_Data> samples = [
  Recipe_Data(
    'Spaghetti and Meatballs',
    'assets/2126711929_ef763de2b3_w.jpg',
  ),
  Recipe_Data(
    'Tomato Soup',
    'assets/27729023535_a57606c1be.jpg',
  ),
  Recipe_Data(
    'Grilled Cheese',
    'assets/3187380632_5056654a19_b.jpg',
  ),
  Recipe_Data(
    'Chocolate Chip Cookies',
    'assets/15992102771_b92f4cc00a_b.jpg',
  ),
  Recipe_Data(
    'Taco Salad',
    'assets/8533381643_a31a99e8a6_c.jpg',
  ),
  Recipe_Data(
    'Hawaiian Pizza',
    'assets/15452035777_294cefced5_c.jpg',
  ),
];
}
// TODO: Add Ingredient() here

```

 これはハードコーディングされたレシピのリストです。後でもっと詳細を追加しますが、今は名前と画像のリストだけです。

 :::message
注：`List`とは、順序付けられた項目の集まりのことで、プログラミング言語によっては配列と呼ばれることもあります。`List`のインデックスは0から始まる。
:::

画像付き`List`を作成しましたが、プロジェクトにまだ画像がありません。追加するには、**Finder**に移動して、プロジェクトのフォルダ構造の本の資料の**02-hello-flutter**のトップレベルにある**assets**フォルダをコピーしてください。完了したら、**lib**フォルダと同じ階層に住んでいるはずです。そうすれば、アプリを実行したときに、画像を見つけることができます。

Finderでコピーペーストすると、Android Studioのプロジェクトリストにフォルダと画像が自動的に表示されるのがわかると思います。


assets画像

しかし、プロジェクトにアセットを追加しただけでは、アプリにアセットを表示することはできません。アプリにこれらのアセットを含めるように指示するには、**recipes**プロジェクトのルートフォルダにある**pubspec.yaml**を開きます。

`To add assets to your application...`の下に、以下の行を追加してください。

```yaml
assets:
  - assets/
```

これらの行は、**assets/** が assets フォルダであり、アプリに含める必要があることを指定します。この最初の行は、その上の `uses-material-design: true` の行と同じ位置にあることを確認してください。

